<nav class="bg-white border-b border-gray-200">
  <div class="w-full text-gray-700 max-w-screen container">
    <div x-data="{ open: false }" class="flex flex-col mx-auto ax-w-screen lg:flex-row">

      <div class="flex flex-row items-center justify-between px-4 py-2">
        <a href="{{siteUrl }}" class="text-lg font-semibold tracking-widest text-gray-900 uppercase    dark-mode:text-white focus:outline-none focus:shadow-outline">
          {# {{ svg('@webroot/assets/images/svg/logo.svg')|attr({ class: 'ml-4 md:ml-0' }) }} #}
          insert logo
          <span class="sr-only">Home</span>
        </a>

        <button class="mr-8 rounded-lg md:mr-12 lg:hidden focus:outline-none focus:shadow-outline" @click="open = !open">
          {{ svg('@webroot/assets/images/svg/close.svg')|attr({ class:'h-6 w-6', 'x-show':'open',  'x-cloak':''}) }}
          <span class="sr-only" x-show="open">Close Menu</span><!-- /.sr-only -->
          {{ svg('@webroot/assets/images/svg/hamburger.svg')|attr({ class:'h-6 w-6', 'x-show':'!open'}) }}
          <span class="sr-only" x-show="!open">Open Menu</span><!-- /.sr-only -->
        </button>
      </div>

      <nav class="flex-col flex-grow hidden h-screen pb-4 lg:pb-0 lg:flex lg:justify-start lg:flex-row lg:h-auto" aria-label="Main Navigation" :class="{'flex': open, 'hidden': !open}">
        <ul class="flex flex-col flex-wrap pl-0 m-0 lg:flex-row">

          {% set pages = craft.entries.section('pages').hideFromNav('0').level('<='~4).all() %}

          {% nav entry in pages %}
            <li class="group relative
              {{ entry.level =='1' ? 'block lg:px-0 xl:px-0 mr-1 py-2':'border-b border-white border-opacity-[0.2]' }}"
              {{ entry.hasDescendants ? 'x-data="{isOpen:false }"  @mouseleave="isOpen = false"':'' }}>

              <a href="{{ entry.hasDescendants ? '#' : entry.url }}"
                class="py-2
                {{ entry.level =='1' ? 'px-4 group-hover:bg-gray-400 group-hover:text-white':'text-white bg-transparent hover:text-gray-100 lg:text-sm' }}"

                {% if entry.hasDescendants %}
                  @click="isOpen = !isOpen"
                  x-on:click.prevent
                  :class="{'rounded-b-none' : isOpen}"
                {% endif %}>

                  {{ entry.title }}
              </a>

              {% ifchildren %}

                {% if entry.level !="1" %}
                  <svg xmlns="http://www.w3.org/2000/svg" fill="white" width="16" height="16" class="hidden lg:inline-block fill-white absolute top-[10px] right-0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
                  </svg>
                {% endif %}

                <ul
                  class="bg-gray-600 p-2"
                  aria-label="submenu"
                   x-show="isOpen"
                   @click.away="isOpen = false">
                  {% children %}
                </ul>
              {% endifchildren %}

            </li>
          {% endnav %}

        </ul>
      </nav>



    </div>
  </div>
</nav>
